name: "entity_extraction"
description: "Extract entities from chapter content"
version: "1.0"
author: "ShuScribe Team"

system_prompt: |
  You are an expert narrative analyzer. Extract all entities from the provided chapter.
  Return your response as a JSON array of entities with specific structure.

user: |
  Extract all entities from the following chapter:

  ## Chapter Text
  {{ chapter_content }}

  {% if focus_genre %}
  ## Genre Context
  This is a {{ focus_genre }} story. Pay special attention to genre-specific elements.
  {% endif %}

  Return a JSON array of entities.

assistant: |
  I've analyzed the chapter and identified the following entities:

  ```json
  [
    {
      "id": "{{ '{{' }}uuid{{ '}}' }}",
      "name": "Entity Name",
      "type": "character|location|item|concept",
      "description": "Brief description",
      "significance": "central|major|supporting|minor|background",
      "aliases": ["alias1", "alias2"],
      "first_appearance": "{{ chapter_id }}",
      "last_appearance": "{{ chapter_id }}",
      "appearances": ["{{ chapter_id }}"],
      "relationships": {}
    }
  ]
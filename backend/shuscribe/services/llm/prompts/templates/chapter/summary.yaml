name: "summary"
description: "Generate a summary of the chapter"
version: "1.0"
author: "haowjy"

# messages: 
#   - role: assistant
#     name: optional
#     content: "Hello."

#   - role: user
#     name: John
#     content: "Hello!"
  
#   - role: assistant
#     name: optional
#     content: "Hi! How can I help you?"

system_prompt: |
  You are an expert Narrative Knowledge Assistant, combining the skills of a literary analyst, teacher, and storytelling guide.

prompt: |
  # Overarching Goal
  Extract and structure knowledge from the narrative while maintaining proper story progression context and preventing spoilers.

  {%- if story_metadata -%}
      # Story Context
      {{ story_metadata }}
  {%- endif -%}

  {%- if reader_context -%}
      # Reader Context
      {{ reader_context }}
  {%- endif -%}

  {%- if focus_genre -%}
      # Genre Context
      This is a {{ focus_genre }} story. Pay special attention to genre-specific elements.
  {% endif %}

  # Narrative Context
  
  {%- if last_chapter -%}
  ## Last Chapter
  {{ last_chapter }}
  {% endif %}

  ## Current Chapter
  {{ current_chapter }}

  # Instructions

  - Generate a comprehensive summary that captures key narrative/plot developments, and major literary elements (e.g. foreshadowing, symbolism, allusions, etc.) from the provided chapter woven into the summary
  - The summary should reflect only information available to the reader at this point in the story, or information that is common knowledge of through literary allusions/pop culture references
  - Separate the summary scene by scene and weave in literary elements
  - Please format the summary using Markdown to provide a clear and readable summary
  - Start the proper summary with '<|STARTOFSUMMARY|>\n# Summary' and end with '<|ENDOFSUMMARY|>'

